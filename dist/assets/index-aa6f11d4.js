(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function c(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=c(s);fetch(s.href,a)}})();const l={events:{},subscribe(n,o){this.events[n]=this.events[n]||[],this.events[n].push(o)},unsubscribe(n,o){this.events[n]&&(this.events[n]=this.events[n].filter(c=>c!==o))},publish(n,o){this.events[n]&&this.events[n].forEach(c=>{c(o)})}};document.getElementById("Gameboards");const T=document.querySelector(".Humanboard"),B=document.querySelector(".Computerboard"),D=n=>{for(;n.firstChild;)n.removeChild(n.lastChild)},$=(n,o)=>{for(let c=0;c<100;c+=1){const r=document.createElement("div");r.classList.add("board-cell"),r.setAttribute("id",`${o}-cell-${c}`),n.appendChild(r)}},j=n=>{n.forEach((o,c)=>{o.shipName&&document.getElementById(`human-cell-${c}`).classList.add("placed-ship")})},V=()=>{D(T),$(T,"human")},F=n=>{const o=n.target.closest("div"),c=o.id.split("-")[2];o.classList.contains("ship-hit")||o.classList.contains("ship-miss")||l.publish("COMPUTER BOARD CELL CLICKED",c)},W=()=>{D(B),$(B,"comp"),B.addEventListener("click",F)},z=n=>{const o=n.location,c=document.getElementById(`comp-cell-${o}`);c.className="board-cell ship-hit";const r=document.createElement("div");r.classList.add("cross"),c.appendChild(r)},J=n=>{const o=n.location,c=document.getElementById(`human-cell-${o}`);c.className="board-cell ship-hit";const r=document.createElement("div");r.classList.add("cross"),c.appendChild(r)},Q=n=>{const o=document.getElementById(`comp-cell-${n}`);o.className="board-cell ship-miss"},X=n=>{const o=document.getElementById(`human-cell-${n}`);o.className="board-cell ship-miss"},I=document.querySelector(".gameOver"),g=document.getElementById("announceWinner"),G=n=>{I.setAttribute("style","transition: transform 0.4s ease-in-out;"),I.classList.add("active"),n==="COMPUTER"?(g.textContent="Rejoice! You have destroyed all your enemy's ships!",g.setAttribute("style","color: var(--cell-ship);")):(g.textContent="Bend the knee! You have been crushed!",g.setAttribute("style","color: var(--cell-ship-comp);"))},Z=()=>{I.classList.remove("active"),l.publish("GAME RESTART")},_=document.getElementById("restartGame");_.addEventListener("click",Z);l.subscribe("HUMAN SHIPS PLACED",j);l.subscribe("COMPUTER BOARD SHIP HIT",z);l.subscribe("HUMAN BOARD SHIP HIT",J);l.subscribe("COMPUTER BOARD SHIP MISS",Q);l.subscribe("HUMAN BOARD SHIP MISS",X);l.subscribe("HUMAN PLAYER'S SHIPS HAVE ALL BEEN SUNK",G);l.subscribe("COMPUTER PLAYER'S SHIPS HAVE ALL BEEN SUNK",G);const b=(n,o)=>({name:n,length:n==="Carrier"?5:n==="Battleship"?4:n==="Cruiser"||n==="Submarine"?3:n==="Destroyer"?2:null,hits:0,sunk:!1,hit(){this.hits+=1,this.isSunk()},isSunk(){this.length===this.hits?(this.sunk=!0,l.publish(`${o} PLAYER SHIP HAS BEEN SUNK`,`${o}`)):this.sunk=!1}}),k=n=>{const o=[];for(let d=0;d<100;d+=1)o.push({shipName:null,shipMiss:null});const c=()=>o,r=(d,M)=>{M.forEach(u=>{o[u].shipName=d.name})},s=d=>{o[d].shipName?(o[d].shipMiss=!1,l.publish(`${n} BOARD SHIP HIT`,{name:o[d].shipName,location:d})):(o[d].shipMiss=!0,l.publish(`${n} BOARD SHIP MISS`,d))},a=()=>{l.publish(`${n} PLAYER'S SHIPS HAVE ALL BEEN SUNK`,`${n}`)};let m=0;const S=()=>{m+=1,m===5&&a()};return l.subscribe(`${n} PLAYER SHIP HAS BEEN SUNK`,S),{name:n,getBoard:c,placeShip:r,receiveAttack:s}},ee=n=>{const o=n,c=[];return{attack:s=>{c.includes(s)||(c.push(s),o.receiveAttack(s))}}},te=n=>{const o=n,c=[];let r=[],s=[],a=[0,5,14,19,23,28,32,37,41,46,50,55,64,69,73,78,82,87,91,96];for(let u=0;u<100;u+=1)s.push(u);const m=()=>r[r.length-1],S=u=>{if(r.length){const e=r[Math.floor(Math.random()*r.length)];c.push(e),o.receiveAttack(e)}else c.push(u),o.receiveAttack(u);r=r.filter(e=>!c.includes(e)),s=s.filter(e=>!c.includes(e)),a=a.filter(e=>!c.includes(e))},d=()=>{if(!r.length)if(a.length){const u=Math.floor(Math.random()*a.length),e=a[u];a=a.filter(t=>t!==e),r.push(e)}else{const u=Math.floor(Math.random()*s.length),e=s[u];r.push(e)}},M=u=>{const e=Number(u.location);let t=[],h;const p=i=>Math.floor(Math.random()*i);switch(!0){case e===0:t=[e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e<9:t=[e-1,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e===9:t=[e-1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e===10:case e===20:case e===30:case e===40:case e===50:case e===60:case e===70:case e===80:t=[e-10,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e===90:t=[e-10,e+1],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case(e>10&&e<19):case(e>20&&e<29):case(e>30&&e<39):case(e>40&&e<49):case(e>50&&e<59):case(e>60&&e<69):case(e>70&&e<79):case(e>80&&e<89):t=[e-10,e-1,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e===19:case e===29:case e===39:case e===49:case e===59:case e===69:case e===79:case e===89:t=[e-10,e-1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case(e>90&&e<99):t=[e-1,e-10,e+1],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break;case e===99:t=[e-1,e-10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(s[Math.floor(Math.random()*s.length)]):t.forEach(i=>r.push(i));break}};return l.subscribe("HUMAN BOARD SHIP HIT",M),{attack:S,findCarrier:d,getNextHit:m}},se=(()=>({startGame:()=>{const o=k("HUMAN"),c=k("COMPUTER"),r=ee(c),s=te(o);let a=r;const m=b("Carrier","HUMAN"),S=b("Carrier","COMPUTER"),d=b("Battleship","HUMAN"),M=b("Battleship","COMPUTER"),u=b("Cruiser","HUMAN"),e=b("Cruiser","COMPUTER"),t=b("Submarine","HUMAN"),h=b("Submarine","COMPUTER"),p=b("Destroyer","HUMAN"),i=b("Destroyer","COMPUTER"),H=[[0,1,2,3,4],[1,2,3,4,5],[3,4,5,6,7],[5,6,7,8,9],[29,39,49,59,69],[49,59,69,79,89],[91,92,93,94,95],[10,20,30,40,50],[30,40,50,60,70],[50,60,70,80,90]],y=[[32,42,52,62],[32,33,34,35],[33,34,35,36],[34,35,36,37],[34,44,54,64],[35,45,55,65],[37,47,57,67],[62,63,64,65]],L=[[11,12,13],[12,13,14],[13,14,15],[14,15,16],[23,24,25],[61,71,81],[96,97,98],[97,98,99]],N=[[17,18,19],[31,41,51],[48,58,68],[58,68,78],[68,78,88],[73,74,75],[85,86,87]],O=[[21,22],[26,27],[28,38],[43,53],[46,56],[72,82],[76,77],[83,84]],f=E=>{const C=Math.floor(Math.random()*E.length);return E[C]};o.placeShip(m,f(H)),o.placeShip(d,f(y)),o.placeShip(u,f(L)),o.placeShip(t,f(N)),o.placeShip(p,f(O)),c.placeShip(S,f(H)),c.placeShip(M,f(y)),c.placeShip(e,f(L)),c.placeShip(h,f(N)),c.placeShip(i,f(O)),l.publish("HUMAN SHIPS PLACED",o.getBoard());const R=()=>{a===r?a=s:a=r};let A=!0;const w=()=>{A=!0},x=()=>{A=!1};l.subscribe("HUMAN BOARD SHIP HIT",x),l.subscribe("HUMAN BOARD SHIP MISS",w);const K=()=>{A&&s.findCarrier(),s.attack(s.getNextHit()),R()},Y=E=>{r.attack(E),R(),K()};l.subscribe("COMPUTER BOARD CELL CLICKED",Y);const v=E=>{const C=[S,M,e,h,i],q=[m,d,u,t,p],U=E.name;(a===r?C.find(P=>Object.values(P)[0]===U):q.find(P=>Object.values(P)[0]===U)).hit()};l.subscribe("COMPUTER BOARD SHIP HIT",v),l.subscribe("HUMAN BOARD SHIP HIT",v)}}))();V();W();se.startGame();const re=()=>{setTimeout(()=>{window.location.reload()},200)};l.subscribe("GAME RESTART",re);
