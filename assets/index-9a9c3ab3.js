(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function c(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=c(n);fetch(n.href,a)}})();const l={events:{},subscribe(s,o){this.events[s]=this.events[s]||[],this.events[s].push(o)},unsubscribe(s,o){this.events[s]&&(this.events[s]=this.events[s].filter(c=>c!==o))},publish(s,o){this.events[s]&&this.events[s].forEach(c=>{c(o)})}},v=document.querySelector(".Humanboard"),A=document.querySelector(".Computerboard"),D=s=>{for(;s.firstChild;)s.removeChild(s.lastChild)},$=(s,o)=>{for(let c=0;c<100;c+=1){const r=document.createElement("div");r.classList.add("board-cell"),r.setAttribute("id",`${o}-cell-${c}`),s.appendChild(r)}},j=s=>{s.forEach((o,c)=>{o.shipName&&document.getElementById(`human-cell-${c}`).classList.add("placed-ship")})},V=s=>{s.forEach((o,c)=>{o.shipName&&document.getElementById(`comp-cell-${c}`).classList.add("placed-ship")})},F=()=>{D(v),$(v,"human")},W=s=>{const o=s.target.closest("div"),c=o.id.split("-")[2];o.classList.contains("ship-hit")||o.classList.contains("ship-miss")||l.publish("COMPUTER BOARD CELL CLICKED",c)},z=()=>{D(A),$(A,"comp"),A.addEventListener("click",W)},J=s=>{const o=s.location,c=document.getElementById(`comp-cell-${o}`);c.className="board-cell ship-hit";const r=document.createElement("div");r.classList.add("cross"),c.appendChild(r)},Q=s=>{const o=s.location,c=document.getElementById(`human-cell-${o}`);c.className="board-cell ship-hit";const r=document.createElement("div");r.classList.add("cross"),c.appendChild(r)},X=s=>{const o=document.getElementById(`comp-cell-${s}`);o.className="board-cell ship-miss"},Z=s=>{const o=document.getElementById(`human-cell-${s}`);o.className="board-cell ship-miss"},B=document.querySelector(".gameOver"),T=document.getElementById("announceWinner"),G=s=>{B.setAttribute("style","transition: transform 0.4s ease-in-out;"),B.classList.add("active"),s==="COMPUTER"?T.textContent="Rejoice! You have destroyed all your enemy's ships!":T.textContent="Bend the knee! You have been crushed!"},_=()=>{B.classList.remove("active"),l.publish("GAME RESTART")},ee=document.getElementById("restartGame");ee.addEventListener("click",_);l.subscribe("HUMAN SHIPS PLACED",j);l.subscribe("COMPUTER SHIPS PLACED",V);l.subscribe("COMPUTER BOARD SHIP HIT",J);l.subscribe("HUMAN BOARD SHIP HIT",Q);l.subscribe("COMPUTER BOARD SHIP MISS",X);l.subscribe("HUMAN BOARD SHIP MISS",Z);l.subscribe("HUMAN PLAYER'S SHIPS HAVE ALL BEEN SUNK",G);l.subscribe("COMPUTER PLAYER'S SHIPS HAVE ALL BEEN SUNK",G);const S=(s,o)=>({name:s,length:s==="Carrier"?5:s==="Battleship"?4:s==="Cruiser"||s==="Submarine"?3:s==="Destroyer"?2:null,hits:0,sunk:!1,hit(){this.hits+=1,this.isSunk()},isSunk(){this.length===this.hits?(this.sunk=!0,l.publish(`${o} PLAYER SHIP HAS BEEN SUNK`,`${o}`)):this.sunk=!1}}),k=s=>{const o=[];for(let d=0;d<100;d+=1)o.push({shipName:null,shipMiss:null});const c=()=>o,r=(d,M)=>{M.forEach(u=>{o[u].shipName=d.name})},n=d=>{o[d].shipName?(o[d].shipMiss=!1,l.publish(`${s} BOARD SHIP HIT`,{name:o[d].shipName,location:d})):(o[d].shipMiss=!0,l.publish(`${s} BOARD SHIP MISS`,d))},a=()=>{l.publish(`${s} PLAYER'S SHIPS HAVE ALL BEEN SUNK`,`${s}`)};let m=0;const b=()=>{m+=1,m===5&&a()};return l.subscribe(`${s} PLAYER SHIP HAS BEEN SUNK`,b),{name:s,getBoard:c,placeShip:r,receiveAttack:n}},te=s=>{const o=s,c=[];return{attack:n=>{c.includes(n)||(c.push(n),o.receiveAttack(n))}}},se=s=>{const o=s,c=[];let r=[],n=[],a=[0,5,14,19,23,28,32,37,41,46,50,55,64,69,73,78,82,87,91,96];for(let u=0;u<100;u+=1)n.push(u);const m=()=>r[r.length-1],b=u=>{if(r.length){const e=r[Math.floor(Math.random()*r.length)];c.push(e),o.receiveAttack(e)}else c.push(u),o.receiveAttack(u);r=r.filter(e=>!c.includes(e)),n=n.filter(e=>!c.includes(e)),a=a.filter(e=>!c.includes(e))},d=()=>{if(!r.length)if(a.length){const u=Math.floor(Math.random()*a.length),e=a[u];a=a.filter(t=>t!==e),r.push(e)}else{const u=Math.floor(Math.random()*n.length),e=n[u];r.push(e)}},M=u=>{const e=Number(u.location);let t=[],h;const p=i=>Math.floor(Math.random()*i);switch(!0){case e===0:t=[e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e<9:t=[e-1,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e===9:t=[e-1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e===10:case e===20:case e===30:case e===40:case e===50:case e===60:case e===70:case e===80:t=[e-10,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e===90:t=[e-10,e+1],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case(e>10&&e<19):case(e>20&&e<29):case(e>30&&e<39):case(e>40&&e<49):case(e>50&&e<59):case(e>60&&e<69):case(e>70&&e<79):case(e>80&&e<89):t=[e-10,e-1,e+1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e===19:case e===29:case e===39:case e===49:case e===59:case e===69:case e===79:case e===89:t=[e-10,e-1,e+10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case(e>90&&e<99):t=[e-1,e-10,e+1],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break;case e===99:t=[e-1,e-10],t=t.filter(i=>!c.includes(i)),h=t[p(t.length)],h===void 0?r.push(n[Math.floor(Math.random()*n.length)]):t.forEach(i=>r.push(i));break}};return l.subscribe("HUMAN BOARD SHIP HIT",M),{attack:b,findCarrier:d,getNextHit:m}},re=(()=>({startGame:()=>{const o=k("HUMAN"),c=k("COMPUTER"),r=te(c),n=se(o);let a=r;const m=S("Carrier","HUMAN"),b=S("Carrier","COMPUTER"),d=S("Battleship","HUMAN"),M=S("Battleship","COMPUTER"),u=S("Cruiser","HUMAN"),e=S("Cruiser","COMPUTER"),t=S("Submarine","HUMAN"),h=S("Submarine","COMPUTER"),p=S("Destroyer","HUMAN"),i=S("Destroyer","COMPUTER"),g=[[0,1,2,3,4],[1,2,3,4,5],[3,4,5,6,7],[5,6,7,8,9],[29,39,49,59,69],[49,59,69,79,89],[91,92,93,94,95],[10,20,30,40,50],[30,40,50,60,70],[50,60,70,80,90]],I=[[32,42,52,62],[32,33,34,35],[33,34,35,36],[34,35,36,37],[34,44,54,64],[35,45,55,65],[37,47,57,67],[62,63,64,65]],L=[[11,12,13],[12,13,14],[13,14,15],[14,15,16],[23,24,25],[61,71,81],[96,97,98],[97,98,99]],y=[[17,18,19],[31,41,51],[48,58,68],[58,68,78],[68,78,88],[73,74,75],[85,86,87]],N=[[21,22],[26,27],[28,38],[43,53],[46,56],[72,82],[76,77],[83,84]],f=E=>{const H=Math.floor(Math.random()*E.length);return E[H]};o.placeShip(m,f(g)),o.placeShip(d,f(I)),o.placeShip(u,f(L)),o.placeShip(t,f(y)),o.placeShip(p,f(N)),c.placeShip(b,f(g)),c.placeShip(M,f(I)),c.placeShip(e,f(L)),c.placeShip(h,f(y)),c.placeShip(i,f(N)),l.publish("HUMAN SHIPS PLACED",o.getBoard()),l.publish("COMPUTER SHIPS PLACED",c.getBoard());const O=()=>{a===r?a=n:a=r};let C=!0;const w=()=>{C=!0},x=()=>{C=!1};l.subscribe("HUMAN BOARD SHIP HIT",x),l.subscribe("HUMAN BOARD SHIP MISS",w);const K=()=>{C&&n.findCarrier(),n.attack(n.getNextHit()),O()},Y=E=>{r.attack(E),O(),K()};l.subscribe("COMPUTER BOARD CELL CLICKED",Y);const R=E=>{const H=[b,M,e,h,i],q=[m,d,u,t,p],U=E.name;(a===r?H.find(P=>Object.values(P)[0]===U):q.find(P=>Object.values(P)[0]===U)).hit()};l.subscribe("COMPUTER BOARD SHIP HIT",R),l.subscribe("HUMAN BOARD SHIP HIT",R)}}))();F();z();re.startGame();const ne=()=>{setTimeout(()=>{window.location.reload()},400)};l.subscribe("GAME RESTART",ne);
